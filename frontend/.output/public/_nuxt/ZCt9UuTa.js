import{e as A,l as H,f as M,m as G,n as x,p as J,y as K,c as v,a as e,q as _,s as r,b as n,w as o,i as s,v as O,j as P,o as d,d as c,h as Q,t as i,x as W,u as C}from"./DwR0AEf0.js";import{_ as X}from"./CT_WQt0m.js";import{_ as Y}from"./COr5thys.js";import{_ as Z}from"./Do5xAnQH.js";import{_ as tt}from"./BiHkM03E.js";import{u as et}from"./Yc1AK7If.js";import{u as st}from"./st4SvOgC.js";const at={class:"min-h-screen p-4"},ot={class:"max-w-4xl mx-auto"},lt={class:"mb-6"},nt={class:"text-center py-8"},dt={class:"text-red-500 mb-4"},it={key:2,class:"space-y-6"},rt={class:"flex justify-between items-start"},ct={class:"flex-1"},ut={class:"text-3xl font-bold text-gray-900 mb-2"},mt={class:"flex items-center gap-4"},_t={class:"text-2xl font-semibold text-green-600"},ft={class:"flex gap-2"},pt={class:"prose max-w-none"},xt={class:"text-gray-700 leading-relaxed"},vt={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},yt={key:0},gt={class:"text-sm text-gray-900"},bt={key:1},kt={class:"text-sm text-gray-900"},Vt={class:"text-sm text-gray-900"},ht={class:"space-y-4"},jt=A({__name:"[id]",setup(wt){const U=H(),y=M(),g=G(),{getVacancy:$,deleteVacancy:B}=O(),{confirm:D}=et(),{canUpdateVacancies:R,canDeleteVacancies:S}=st(),b=U.params.id,a=x(),k=x(!0),V=x(null),f=x("created_at,updated_at"),p=async()=>{k.value=!0,V.value=null;try{a.value=await $(b,f.value)}catch(l){V.value=l,g.add({title:"Ошибка",description:"Не удалось загрузить вакансию",color:"error"})}finally{k.value=!1}};J(()=>{p()}),K(()=>{a.value?.title?C({title:`${a.value.title} - Просмотр вакансии`}):C({title:"Просмотр вакансии"})});const j=()=>{y.push(`/jobs/${b}/edit`)},N=()=>{D("Удаление вакансии","Вы уверены, что хотите удалить эту вакансию? Это действие нельзя отменить.","Удалить",async()=>{try{await B(b),g.add({title:"Успех",description:"Вакансия удалена",color:"success"}),y.push("/jobs")}catch{g.add({title:"Ошибка",description:"Не удалось удалить вакансию",color:"error"})}})},I=l=>l?`${new Intl.NumberFormat("ru-RU").format(l)} ₽`:"Не указана",h=l=>new Date(l*1e3).toLocaleString("ru-RU"),T=l=>l===1?"Активная":"Архивная",z=l=>l===1?"success":"gray";return(l,t)=>{const u=P,E=X,F=Q,m=Y,L=Z,q=tt;return d(),v("div",at,[e("div",ot,[e("div",lt,[n(u,{icon:"i-lucide-arrow-left",variant:"ghost",onClick:t[0]||(t[0]=w=>s(y).push("/jobs"))},{default:o(()=>[...t[2]||(t[2]=[c(" Назад к списку ",-1)])]),_:1})]),s(k)?(d(),_(E,{key:0,message:"Загрузка вакансии",size:"lg"})):s(V)?(d(),_(m,{key:1,class:"border-red-200"},{default:o(()=>[e("div",nt,[e("div",dt,[n(F,{name:"i-lucide-alert-circle",class:"w-12 h-12 mx-auto"})]),t[4]||(t[4]=e("h3",{class:"text-lg font-semibold text-red-700 mb-2"},"Ошибка загрузки",-1)),t[5]||(t[5]=e("p",{class:"text-gray-600 mb-4"},"Не удалось загрузить информацию о вакансии",-1)),n(u,{onClick:p,color:"red",variant:"outline"},{default:o(()=>[...t[3]||(t[3]=[c(" Попробовать снова ",-1)])]),_:1})])]),_:1})):s(a)?(d(),v("div",it,[n(m,null,{default:o(()=>[e("div",rt,[e("div",ct,[e("h1",ut,i(s(a).title),1),e("div",mt,[n(L,{color:z(s(a).status),variant:"subtle",size:"lg"},{default:o(()=>[c(i(T(s(a).status)),1)]),_:1},8,["color"]),e("span",_t,i(I(s(a).salary)),1)])]),e("div",ft,[s(R)?(d(),_(u,{key:0,icon:"i-lucide-edit",color:"blue",variant:"outline",onClick:j},{default:o(()=>[...t[6]||(t[6]=[c(" Редактировать ",-1)])]),_:1})):r("",!0),s(S)?(d(),_(u,{key:1,icon:"i-lucide-trash",color:"red",variant:"outline",onClick:N},{default:o(()=>[...t[7]||(t[7]=[c(" Удалить ",-1)])]),_:1})):r("",!0)])])]),_:1}),n(m,null,{header:o(()=>[...t[8]||(t[8]=[e("h2",{class:"text-xl font-semibold"},"Описание вакансии",-1)])]),default:o(()=>[e("div",pt,[e("p",xt,i(s(a).description||"Описание отсутствует"),1)])]),_:1}),s(a).created_at||s(a).updated_at?(d(),_(m,{key:0},{header:o(()=>[...t[9]||(t[9]=[e("h2",{class:"text-xl font-semibold"},"Дополнительная информация",-1)])]),default:o(()=>[e("div",vt,[s(a).created_at?(d(),v("div",yt,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Дата создания",-1)),e("dd",gt,i(h(s(a).created_at)),1)])):r("",!0),s(a).updated_at?(d(),v("div",bt,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Последнее обновление",-1)),e("dd",kt,i(h(s(a).updated_at)),1)])):r("",!0),e("div",null,[t[12]||(t[12]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"ID вакансии",-1)),e("dd",Vt,"#"+i(s(a).id),1)])])]),_:1})):r("",!0),n(m,null,{header:o(()=>[...t[13]||(t[13]=[e("h2",{class:"text-xl font-semibold"},"Настройки отображения",-1)])]),default:o(()=>[e("div",ht,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Дополнительные поля ",-1)),n(q,{modelValue:s(f),"onUpdate:modelValue":t[1]||(t[1]=w=>W(f)?f.value=w:null),options:[{label:"Только основные поля",value:""},{label:"С датами создания и обновления",value:"created_at,updated_at"},{label:"Только дата создания",value:"created_at"},{label:"Только дата обновления",value:"updated_at"}],onChange:p},null,8,["modelValue"])]),n(u,{icon:"i-lucide-refresh-cw",variant:"outline",onClick:p},{default:o(()=>[...t[15]||(t[15]=[c(" Обновить данные ",-1)])]),_:1})])]),_:1})])):r("",!0)])])}}});export{jt as default};

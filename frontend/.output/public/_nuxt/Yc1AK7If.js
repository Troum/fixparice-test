import{e as D,J as X,H as Z,n as x,G as Q,K as c,i as a,R as q,q as p,o as d,w as u,U as b,P,p as H,E as K,b as h,T as Y,a0 as j,W as G,s as _,L as R,M as T,Z as ee,aw as te,a4 as ae,ae as oe,ac as se,X as le,aq as ne,af as re,ag as N,$ as U,ad as V,z as k,a9 as ie,a6 as ue,d as I,t as $,c as F,a as C,j as J,h as de,m as ce}from"./DwR0AEf0.js";import{p as S,g as pe,F as fe,o as ve,d as me}from"./BiHkM03E.js";const[w,ge]=X("DialogRoot");var ye=D({inheritAttrs:!1,__name:"DialogRoot",props:{open:{type:Boolean,required:!1,default:void 0},defaultOpen:{type:Boolean,required:!1,default:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["update:open"],setup(o,{emit:l}){const e=o,t=Z(e,"open",l,{defaultValue:e.defaultOpen,passive:e.open===void 0}),f=x(),m=x(),{modal:i}=Q(e);return ge({open:t,modal:i,openModal:()=>{t.value=!0},onOpenChange:n=>{t.value=n},onOpenToggle:()=>{t.value=!t.value},contentId:"",titleId:"",descriptionId:"",triggerElement:f,contentElement:m}),(n,r)=>c(n.$slots,"default",{open:a(t),close:()=>t.value=!1})}}),_e=ye,De=D({__name:"DialogClose",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const l=o;q();const e=w();return(s,t)=>(d(),p(a(P),b(l,{type:s.as==="button"?"button":void 0,onClick:t[0]||(t[0]=f=>a(e).onOpenChange(!1))}),{default:u(()=>[c(s.$slots,"default")]),_:3},16,["type"]))}}),Ce=De,be=D({__name:"DialogContentImpl",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:l}){const e=o,s=l,t=w(),{forwardRef:f,currentElement:m}=q();return t.titleId||=S(void 0,"reka-dialog-title"),t.descriptionId||=S(void 0,"reka-dialog-description"),H(()=>{t.contentElement=m,K()!==document.body&&(t.triggerElement.value=K())}),(i,n)=>(d(),p(a(fe),{"as-child":"",loop:"",trapped:e.trapFocus,onMountAutoFocus:n[5]||(n[5]=r=>s("openAutoFocus",r)),onUnmountAutoFocus:n[6]||(n[6]=r=>s("closeAutoFocus",r))},{default:u(()=>[h(a(Y),b({id:a(t).contentId,ref:a(f),as:i.as,"as-child":i.asChild,"disable-outside-pointer-events":i.disableOutsidePointerEvents,role:"dialog","aria-describedby":a(t).descriptionId,"aria-labelledby":a(t).titleId,"data-state":a(pe)(a(t).open.value)},i.$attrs,{onDismiss:n[0]||(n[0]=r=>a(t).onOpenChange(!1)),onEscapeKeyDown:n[1]||(n[1]=r=>s("escapeKeyDown",r)),onFocusOutside:n[2]||(n[2]=r=>s("focusOutside",r)),onInteractOutside:n[3]||(n[3]=r=>s("interactOutside",r)),onPointerDownOutside:n[4]||(n[4]=r=>s("pointerDownOutside",r))}),{default:u(()=>[c(i.$slots,"default")]),_:3},16,["id","as","as-child","disable-outside-pointer-events","aria-describedby","aria-labelledby","data-state"])]),_:3},8,["trapped"]))}}),W=be,he=D({__name:"DialogContentModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:l}){const e=o,s=l,t=w(),f=j(s),{forwardRef:m,currentElement:i}=q();return ve(i),(n,r)=>(d(),p(W,b({...e,...a(f)},{ref:a(m),"trap-focus":a(t).open.value,"disable-outside-pointer-events":!0,onCloseAutoFocus:r[0]||(r[0]=v=>{v.defaultPrevented||(v.preventDefault(),a(t).triggerElement.value?.focus())}),onPointerDownOutside:r[1]||(r[1]=v=>{const g=v.detail.originalEvent,y=g.button===0&&g.ctrlKey===!0;(g.button===2||y)&&v.preventDefault()}),onFocusOutside:r[2]||(r[2]=v=>{v.preventDefault()})}),{default:u(()=>[c(n.$slots,"default")]),_:3},16,["trap-focus"]))}}),qe=he,we=D({__name:"DialogContentNonModal",props:{forceMount:{type:Boolean,required:!1},trapFocus:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:l}){const e=o,t=j(l);q();const f=w(),m=x(!1),i=x(!1);return(n,r)=>(d(),p(W,b({...e,...a(t)},{"trap-focus":!1,"disable-outside-pointer-events":!1,onCloseAutoFocus:r[0]||(r[0]=v=>{v.defaultPrevented||(m.value||a(f).triggerElement.value?.focus(),v.preventDefault()),m.value=!1,i.value=!1}),onInteractOutside:r[1]||(r[1]=v=>{v.defaultPrevented||(m.value=!0,v.detail.originalEvent.type==="pointerdown"&&(i.value=!0));const g=v.target;a(f).triggerElement.value?.contains(g)&&v.preventDefault(),v.detail.originalEvent.type==="focusin"&&i.value&&v.preventDefault()})}),{default:u(()=>[c(n.$slots,"default")]),_:3},16))}}),Oe=we,ke=D({__name:"DialogContent",props:{forceMount:{type:Boolean,required:!1},disableOutsidePointerEvents:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(o,{emit:l}){const e=o,s=l,t=w(),f=j(s),{forwardRef:m}=q();return(i,n)=>(d(),p(a(G),{present:i.forceMount||a(t).open.value},{default:u(()=>[a(t).modal.value?(d(),p(qe,b({key:0,ref:a(m)},{...e,...a(f),...i.$attrs}),{default:u(()=>[c(i.$slots,"default")]),_:3},16)):(d(),p(Oe,b({key:1,ref:a(m)},{...e,...a(f),...i.$attrs}),{default:u(()=>[c(i.$slots,"default")]),_:3},16))]),_:3},8,["present"]))}}),Be=ke,$e=D({__name:"DialogDescription",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"p"}},setup(o){const l=o;q();const e=w();return(s,t)=>(d(),p(a(P),b(l,{id:a(e).descriptionId}),{default:u(()=>[c(s.$slots,"default")]),_:3},16,["id"]))}}),L=$e,xe=D({__name:"DialogOverlayImpl",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const l=w();return me(!0),q(),(e,s)=>(d(),p(a(P),{as:e.as,"as-child":e.asChild,"data-state":a(l).open.value?"open":"closed",style:{"pointer-events":"auto"}},{default:u(()=>[c(e.$slots,"default")]),_:3},8,["as","as-child","data-state"]))}}),Pe=xe,Ee=D({__name:"DialogOverlay",props:{forceMount:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const l=w(),{forwardRef:e}=q();return(s,t)=>a(l)?.modal.value?(d(),p(a(G),{key:0,present:s.forceMount||a(l).open.value},{default:u(()=>[h(Pe,b(s.$attrs,{ref:a(e),as:s.as,"as-child":s.asChild}),{default:u(()=>[c(s.$slots,"default")]),_:3},16,["as","as-child"])]),_:3},8,["present"])):_("v-if",!0)}}),Ie=Ee,Ae=D({__name:"DialogPortal",props:{to:{type:null,required:!1},disabled:{type:Boolean,required:!1},defer:{type:Boolean,required:!1},forceMount:{type:Boolean,required:!1}},setup(o){const l=o;return(e,s)=>(d(),p(a(ee),R(T(l)),{default:u(()=>[c(e.$slots,"default")]),_:3},16))}}),Fe=Ae,Me=D({__name:"DialogTitle",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"h2"}},setup(o){const l=o,e=w();return q(),(s,t)=>(d(),p(a(P),b(l,{id:a(e).titleId}),{default:u(()=>[c(s.$slots,"default")]),_:3},16,["id"]))}}),z=Me,Re=D({__name:"DialogTrigger",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const l=o,e=w(),{forwardRef:s,currentElement:t}=q();return e.contentId||=S(void 0,"reka-dialog-content"),H(()=>{e.triggerElement.value=t.value}),(f,m)=>(d(),p(a(P),b(l,{ref:a(s),type:f.as==="button"?"button":void 0,"aria-haspopup":"dialog","aria-expanded":a(e).open.value||!1,"aria-controls":a(e).open.value?a(e).contentId:void 0,"data-state":a(e).open.value?"open":"closed",onClick:a(e).onOpenToggle}),{default:u(()=>[c(f.$slots,"default")]),_:3},16,["type","aria-expanded","aria-controls","data-state","onClick"]))}}),Te=Re;function Se(){const o=te();async function l(e,s={}){const t=o.create(e,{props:s});return t.open(),t}return{overlay:o,showModal:l}}const je={slots:{overlay:"fixed inset-0 bg-elevated/75",content:"fixed bg-default divide-y divide-default flex flex-col focus:outline-none",header:"flex items-center gap-1.5 p-4 sm:px-6 min-h-16",wrapper:"",body:"flex-1 overflow-y-auto p-4 sm:p-6",footer:"flex items-center gap-1.5 p-4 sm:px-6",title:"text-highlighted font-semibold",description:"mt-1 text-muted text-sm",close:"absolute top-4 end-4"},variants:{transition:{true:{overlay:"data-[state=open]:animate-[fade-in_200ms_ease-out] data-[state=closed]:animate-[fade-out_200ms_ease-in]",content:"data-[state=open]:animate-[scale-in_200ms_ease-out] data-[state=closed]:animate-[scale-out_200ms_ease-in]"}},fullscreen:{true:{content:"inset-0"},false:{content:"top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[calc(100vw-2rem)] max-w-lg max-h-[calc(100dvh-2rem)] sm:max-h-[calc(100dvh-4rem)] rounded-lg shadow-lg ring ring-default overflow-hidden"}}}},Ke={__name:"UModal",props:{title:{type:String,required:!1},description:{type:String,required:!1},content:{type:Object,required:!1},overlay:{type:Boolean,required:!1,default:!0},transition:{type:Boolean,required:!1,default:!0},fullscreen:{type:Boolean,required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},close:{type:[Boolean,Object],required:!1,default:!0},closeIcon:{type:String,required:!1},dismissible:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},ui:{type:null,required:!1},open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},modal:{type:Boolean,required:!1,default:!0}},emits:["after:leave","after:enter","close:prevent","update:open"],setup(o,{emit:l}){const e=o,s=l,t=ae(),{t:f}=oe(),m=se(),i=le(ne(e,"open","defaultOpen","modal"),s),n=re(N(()=>e.portal)),r=N(()=>e.content),v=U(()=>{const y={closeAutoFocus:O=>O.preventDefault()};return e.dismissible?y:["pointerDownOutside","interactOutside","escapeKeyDown"].reduce((E,B)=>(E[B]=A=>{A.preventDefault(),s("close:prevent")},E),y)}),g=U(()=>V({extend:V(je),...m.ui?.modal||{}})({transition:e.transition,fullscreen:e.fullscreen}));return(y,O)=>(d(),p(a(_e),R(T(a(i))),{default:u(({open:E,close:B})=>[t.default?(d(),p(a(Te),{key:0,"as-child":"",class:k(e.class)},{default:u(()=>[c(y.$slots,"default",{open:E})]),_:2},1032,["class"])):_("",!0),h(a(Fe),R(T(a(n))),{default:u(()=>[o.overlay?(d(),p(a(Ie),{key:0,class:k(g.value.overlay({class:e.ui?.overlay}))},null,8,["class"])):_("",!0),h(a(Be),b({class:g.value.content({class:[!t.default&&e.class,e.ui?.content]})},r.value,{onAfterEnter:O[0]||(O[0]=A=>s("after:enter")),onAfterLeave:O[1]||(O[1]=A=>s("after:leave"))},ie(v.value)),{default:u(()=>[t.content&&(o.title||t.title||o.description||t.description)?(d(),p(a(ue),{key:0},{default:u(()=>[o.title||t.title?(d(),p(a(z),{key:0},{default:u(()=>[c(y.$slots,"title",{},()=>[I($(o.title),1)])]),_:3})):_("",!0),o.description||t.description?(d(),p(a(L),{key:1},{default:u(()=>[c(y.$slots,"description",{},()=>[I($(o.description),1)])]),_:3})):_("",!0)]),_:3})):_("",!0),c(y.$slots,"content",{close:B},()=>[t.header||o.title||t.title||o.description||t.description||e.close||t.close?(d(),F("div",{key:0,class:k(g.value.header({class:e.ui?.header}))},[c(y.$slots,"header",{close:B},()=>[C("div",{class:k(g.value.wrapper({class:e.ui?.wrapper}))},[o.title||t.title?(d(),p(a(z),{key:0,class:k(g.value.title({class:e.ui?.title}))},{default:u(()=>[c(y.$slots,"title",{},()=>[I($(o.title),1)])]),_:3},8,["class"])):_("",!0),o.description||t.description?(d(),p(a(L),{key:1,class:k(g.value.description({class:e.ui?.description}))},{default:u(()=>[c(y.$slots,"description",{},()=>[I($(o.description),1)])]),_:3},8,["class"])):_("",!0)],2),c(y.$slots,"actions"),e.close||t.close?(d(),p(a(Ce),{key:0,"as-child":""},{default:u(()=>[c(y.$slots,"close",{close:B,ui:g.value},()=>[e.close?(d(),p(J,b({key:0,icon:o.closeIcon||a(m).ui.icons.close,color:"neutral",variant:"ghost","aria-label":a(f)("modal.close")},typeof e.close=="object"?e.close:{},{class:g.value.close({class:e.ui?.close})}),null,16,["icon","aria-label","class"])):_("",!0)])]),_:2},1024)):_("",!0)])],2)):_("",!0),t.body?(d(),F("div",{key:1,class:k(g.value.body({class:e.ui?.body}))},[c(y.$slots,"body",{close:B})],2)):_("",!0),t.footer?(d(),F("div",{key:2,class:k(g.value.footer({class:e.ui?.footer}))},[c(y.$slots,"footer",{close:B})],2)):_("",!0)])]),_:2},1040,["class"])]),_:2},1040)]),_:3},16))}};function Ne(o,l){return new Promise(e=>setTimeout(async()=>{await void 0,e()},o))}const Ue={class:"flex items-center justify-between w-full px-5 py-3 border-b border-gray-200/70 dark:border-gray-800/70 bg-gradient-to-r from-rose-50 to-transparent dark:from-rose-950/20"},Ve={class:"flex items-center gap-3"},Le={class:"inline-flex h-10 w-10 items-center justify-center rounded-full bg-rose-100 text-rose-600 ring-1 ring-rose-200/60 dark:bg-rose-400/10 dark:text-rose-400 dark:ring-rose-400/20","aria-hidden":"true"},ze={class:"text-base font-semibold tracking-tight text-gray-900 dark:text-gray-100"},He={class:"px-2 py-5"},Ge={class:"text-sm leading-relaxed text-gray-600 dark:text-gray-300"},Je={class:"flex items-center justify-end gap-3 w-full px-6 py-4"},We={class:"flex items-center gap-2"},Xe={class:"flex items-center gap-2"},Ze={class:"font-semibold"},Qe=D({__name:"ConfirmationModalComponent",emits:["close"],setup(o,{emit:l}){const{params:e}=tt(),s=l,t=x(!1),f=async()=>{if(!t.value){t.value=!0;try{await Promise.resolve(e.value.action()),await Ne(150),s("close",!0)}finally{t.value=!1}}};return(m,i)=>{const n=de,r=J,v=Ke;return d(),p(v,{ui:{header:"flex items-center gap-0 sm:p-0 min-h-16",footer:"flex items-center gap-0 sm:p-0 min-h-16"}},{header:u(()=>[C("div",Ue,[C("div",Ve,[C("div",Le,[h(n,{name:"i-mdi-alert-circle-outline",class:"h-6 w-6"})]),C("p",ze,$(a(e).title),1)]),h(r,{variant:"ghost",color:"neutral",icon:"i-lucide-x",size:"sm","aria-label":"Закрыть",onClick:i[0]||(i[0]=g=>s("close",!1))})])]),body:u(()=>[C("div",He,[C("p",Ge,$(a(e).message),1)])]),footer:u(()=>[C("div",Je,[h(r,{variant:"ghost",color:"neutral",disabled:t.value,onClick:i[1]||(i[1]=g=>s("close",!1))},{default:u(()=>[C("span",We,[h(n,{name:"i-lucide-x",class:"w-4 h-4"}),i[2]||(i[2]=C("span",{class:"font-medium"},"Отменить",-1))])]),_:1},8,["disabled"]),h(r,{color:"error",loading:t.value,disabled:t.value,onClick:f},{default:u(()=>[C("span",Xe,[h(n,{name:"i-lucide-check",class:"w-4 h-4"}),C("span",Ze,$(a(e).label),1)])]),_:1},8,["loading","disabled"])])]),_:1})}}}),Ye=Object.assign(Qe,{__name:"ConfirmationModalComponent"}),M=x({title:"Title",message:"Description",label:"Confirm",action:()=>{}}),{showModal:et}=Se(),tt=()=>{async function o(e,s,t,f){M.value={title:e,message:s,label:t,action:f},await et(Ye,M)}function l(e="Удалить запись?",s="Вы действительно хотите удалить запись?",t="Удалить",f,m="Запись удалена успешно",i="Не удалось удалить запись"){const n=ce();o(e,s,t,async()=>{try{await f(),n.add({title:"Успех",description:m,color:"success"})}catch{n.add({title:"Ошибка",description:i,color:"error"})}}).then()}return{confirm:o,confirmDelete:l,params:M}};export{tt as u};

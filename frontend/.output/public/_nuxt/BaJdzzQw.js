import{_ as A}from"./C9Q6IWo4.js";import{e as N,l as S,f as R,m as D,n as m,p as J,u as L,c as y,a as e,b as a,q as k,s as w,w as l,i as s,v as M,j as T,o as c,d as x,h as q,t as E}from"./DwR0AEf0.js";import{_ as F}from"./COr5thys.js";import{J as H}from"./BD53Fd1c.js";import"./DaMzFuD0.js";import"./Cz8f_uTG.js";import"./BiHkM03E.js";const I={class:"min-h-screen p-4"},O={class:"max-w-2xl mx-auto"},z={class:"mb-6"},G={key:0,class:"flex justify-center items-center py-12"},K={class:"text-center py-8"},P={class:"text-red-500 mb-4"},Q={class:"space-x-2"},W={key:2},X={class:"flex items-center gap-2 text-sm text-gray-600"},nt=N({__name:"[id]",setup(Y){const C=S(),d=R(),p=D(),{getVacancy:$,updateVacancy:V}=M(),r=C.params.id,n=m(),f=m(!1),_=m(!0),v=m(null),b=async()=>{_.value=!0,v.value=null;try{n.value=await $(r)}catch(u){v.value=u,p.add({title:"Ошибка",description:"Не удалось загрузить данные вакансии",color:"error"})}finally{_.value=!1}},j=async u=>{f.value=!0;try{await V(r,u),p.add({title:"Успех!",description:"Вакансия успешно обновлена",color:"success"}),d.push(`/demo/${r}`)}catch(t){console.error("Ошибка обновления вакансии:",t);let i="Не удалось обновить вакансию";if(t.data&&t.data.errors){const o=t.data.errors;Array.isArray(o)?i=o.join(", "):typeof o=="object"&&(i=Object.values(o).flat().join(", "))}p.add({title:"Ошибка обновления",description:i,color:"error"})}finally{f.value=!1}},B=()=>{d.push(`/demo/${r}`)};return J(()=>{b()}),L({title:"Демо - Редактирование вакансии"}),(u,t)=>{const i=A,o=T,g=q,h=F;return c(),y("div",I,[e("div",O,[a(i,{icon:"i-lucide-edit",color:"info",variant:"subtle",title:"Демо редактирование",description:"Редактирование вакансии в демо режиме",class:"mb-6"}),e("div",z,[a(o,{icon:"i-lucide-arrow-left",variant:"ghost",onClick:t[0]||(t[0]=U=>s(d).push(`/demo/${s(r)}`))},{default:l(()=>[...t[2]||(t[2]=[x(" Назад к демо вакансии ",-1)])]),_:1})]),s(_)?(c(),y("div",G,[...t[3]||(t[3]=[e("div",{class:"text-center"},[e("div",{class:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e("p",{class:"text-gray-600"},"Загрузка данных вакансии...")],-1)])])):s(v)?(c(),k(h,{key:1,class:"border-red-200"},{default:l(()=>[e("div",K,[e("div",P,[a(g,{name:"i-lucide-alert-circle",class:"w-12 h-12 mx-auto"})]),t[6]||(t[6]=e("h3",{class:"text-lg font-semibold text-red-700 mb-2"},"Ошибка загрузки",-1)),t[7]||(t[7]=e("p",{class:"text-gray-600 mb-4"},"Не удалось загрузить данные вакансии для редактирования",-1)),e("div",Q,[a(o,{onClick:b,color:"error",variant:"outline"},{default:l(()=>[...t[4]||(t[4]=[x(" Попробовать снова ",-1)])]),_:1}),a(o,{onClick:t[1]||(t[1]=U=>s(d).push("/demo")),variant:"ghost"},{default:l(()=>[...t[5]||(t[5]=[x(" К демо списку ",-1)])]),_:1})])])]),_:1})):s(n)?(c(),y("div",W,[a(H,{"initial-data":s(n),loading:s(f),"is-edit":"",onSubmit:j,onCancel:B},null,8,["initial-data","loading"]),s(n).updated_at?(c(),k(h,{key:0,class:"mt-6 border-gray-200 bg-gray-50"},{default:l(()=>[e("div",X,[a(g,{name:"i-lucide-clock",class:"w-4 h-4"}),e("span",null," Последнее обновление: "+E(new Date(s(n).updated_at*1e3).toLocaleString("ru-RU")),1)])]),_:1})):w("",!0)])):w("",!0)])])}}});export{nt as default};

import{_ as L}from"./C9Q6IWo4.js";import{e as q,l as E,f as M,m as G,n as f,p as H,c as p,a as e,b as l,q as h,s as x,w as a,i as s,v as J,j as K,o as r,d,h as O,t as i,x as P}from"./DwR0AEf0.js";import{_ as Q}from"./CT_WQt0m.js";import{_ as W}from"./COr5thys.js";import{_ as X}from"./Do5xAnQH.js";import{_ as Y}from"./BiHkM03E.js";import{u as Z}from"./Yc1AK7If.js";const tt={class:"min-h-screen p-4"},et={class:"max-w-4xl mx-auto"},st={class:"mb-6"},ot={class:"text-center py-8"},at={class:"text-red-500 mb-4"},nt={key:2,class:"space-y-6"},lt={class:"flex justify-between items-start"},rt={class:"flex-1"},it={class:"text-3xl font-bold text-gray-900 mb-2"},dt={class:"flex items-center gap-4"},ct={class:"text-2xl font-semibold text-green-600"},ut={class:"flex gap-2"},mt={class:"prose max-w-none"},_t={class:"text-gray-700 leading-relaxed"},ft={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},pt={key:0},xt={class:"text-sm text-gray-900"},vt={key:1},yt={class:"text-sm text-gray-900"},gt={class:"text-sm text-gray-900"},bt={class:"space-y-4"},St=q({__name:"[id]",setup(kt){const C=E(),v=M(),y=G(),{getVacancy:U,deleteVacancy:$}=J(),{confirm:B}=Z(),g=C.params.id,o=f(),b=f(!0),k=f(null),m=f("created_at,updated_at"),_=async()=>{b.value=!0,k.value=null;try{o.value=await U(g,m.value)}catch(n){k.value=n,y.add({title:"Ошибка",description:"Не удалось загрузить вакансию",color:"error"})}finally{b.value=!1}};H(()=>{_()});const S=()=>{v.push(`/demo/edit/${g}`)},D=()=>{B("Удаление вакансии","Вы уверены, что хотите удалить эту вакансию? Это действие нельзя отменить.","Удалить",async()=>{try{await $(g),y.add({title:"Успех",description:"Вакансия удалена",color:"success"}),v.push("/demo")}catch{y.add({title:"Ошибка",description:"Не удалось удалить вакансию",color:"error"})}})},N=n=>n?`${new Intl.NumberFormat("ru-RU").format(n)} ₽`:"Не указана",V=n=>new Date(n*1e3).toLocaleString("ru-RU"),R=n=>n===1?"Активная":"Архивная",I=n=>n===1?"success":"error";return(n,t)=>{const T=L,c=K,j=Q,z=O,u=W,A=X,F=Y;return r(),p("div",tt,[e("div",et,[l(T,{icon:"i-lucide-eye",color:"info",variant:"subtle",title:"Демо просмотр",description:"Просмотр вакансии в демо режиме",class:"mb-6"}),e("div",st,[l(c,{icon:"i-lucide-arrow-left",variant:"ghost",onClick:t[0]||(t[0]=w=>s(v).push("/demo"))},{default:a(()=>[...t[2]||(t[2]=[d(" Назад к демо списку ",-1)])]),_:1})]),s(b)?(r(),h(j,{key:0,message:"Загрузка демо вакансии",size:"lg"})):s(k)?(r(),h(u,{key:1,class:"border-red-200"},{default:a(()=>[e("div",ot,[e("div",at,[l(z,{name:"i-lucide-alert-circle",class:"w-12 h-12 mx-auto"})]),t[4]||(t[4]=e("h3",{class:"text-lg font-semibold text-red-700 mb-2"},"Ошибка загрузки",-1)),t[5]||(t[5]=e("p",{class:"text-gray-600 mb-4"},"Не удалось загрузить информацию о вакансии",-1)),l(c,{onClick:_,color:"error",variant:"outline"},{default:a(()=>[...t[3]||(t[3]=[d(" Попробовать снова ",-1)])]),_:1})])]),_:1})):s(o)?(r(),p("div",nt,[l(u,null,{default:a(()=>[e("div",lt,[e("div",rt,[e("h1",it,i(s(o).title),1),e("div",dt,[l(A,{color:I(s(o).status),variant:"subtle",size:"lg"},{default:a(()=>[d(i(R(s(o).status)),1)]),_:1},8,["color"]),e("span",ct,i(N(s(o).salary)),1)])]),e("div",ut,[l(c,{icon:"i-lucide-edit",color:"info",variant:"outline",onClick:S},{default:a(()=>[...t[6]||(t[6]=[d(" Редактировать ",-1)])]),_:1}),l(c,{icon:"i-lucide-trash",color:"error",variant:"outline",onClick:D},{default:a(()=>[...t[7]||(t[7]=[d(" Удалить ",-1)])]),_:1})])])]),_:1}),l(u,null,{header:a(()=>[...t[8]||(t[8]=[e("h2",{class:"text-xl font-semibold"},"Описание вакансии",-1)])]),default:a(()=>[e("div",mt,[e("p",_t,i(s(o).description||"Описание отсутствует"),1)])]),_:1}),s(o).created_at||s(o).updated_at?(r(),h(u,{key:0},{header:a(()=>[...t[9]||(t[9]=[e("h2",{class:"text-xl font-semibold"},"Дополнительная информация",-1)])]),default:a(()=>[e("div",ft,[s(o).created_at?(r(),p("div",pt,[t[10]||(t[10]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Дата создания",-1)),e("dd",xt,i(V(s(o).created_at)),1)])):x("",!0),s(o).updated_at?(r(),p("div",vt,[t[11]||(t[11]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"Последнее обновление",-1)),e("dd",yt,i(V(s(o).updated_at)),1)])):x("",!0),e("div",null,[t[12]||(t[12]=e("dt",{class:"text-sm font-medium text-gray-500 mb-1"},"ID вакансии",-1)),e("dd",gt,"#"+i(s(o).id),1)])])]),_:1})):x("",!0),l(u,null,{header:a(()=>[...t[13]||(t[13]=[e("h2",{class:"text-xl font-semibold"},"Настройки отображения",-1)])]),default:a(()=>[e("div",bt,[e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"}," Дополнительные поля ",-1)),l(F,{modelValue:s(m),"onUpdate:modelValue":t[1]||(t[1]=w=>P(m)?m.value=w:null),placeholder:"Только основные поля",items:[{label:"С датами создания и обновления",value:"created_at,updated_at"},{label:"Только дата создания",value:"created_at"},{label:"Только дата обновления",value:"updated_at"}],onChange:_},null,8,["modelValue"])]),l(c,{icon:"i-lucide-refresh-cw",variant:"outline",onClick:_},{default:a(()=>[...t[15]||(t[15]=[d(" Обновить данные ",-1)])]),_:1})])]),_:1})])):x("",!0)])])}}});export{St as default};
